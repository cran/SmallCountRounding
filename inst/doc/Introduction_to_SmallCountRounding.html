<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Øyvind Langsrud and Johan Heldal" />

<meta name="date" content="2022-08-26" />

<title>Introduction to ‘SmallCountRounding’</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>
<script src="data:application/javascript;base64,JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsKICAgIGlmICh0eXBlb2YgJCgnW2RhdGEtdG9nZ2xlPSJ0b29sdGlwIl0nKS50b29sdGlwID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPSJ0b29sdGlwIl0nKS50b29sdGlwKCk7CiAgICB9CiAgICBpZiAoJCgnW2RhdGEtdG9nZ2xlPSJwb3BvdmVyIl0nKS5wb3BvdmVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPSJwb3BvdmVyIl0nKS5wb3BvdmVyKCk7CiAgICB9Cn0pOwo="></script>
<link href="data:text/css,%0A%2Elightable%2Dminimal%20%7B%0Aborder%2Dcollapse%3A%20separate%3B%0Aborder%2Dspacing%3A%2016px%201px%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dminimal%20td%20%7B%0Amargin%2Dleft%3A%205px%3B%0Amargin%2Dright%3A%205px%3B%0A%7D%0A%2Elightable%2Dminimal%20th%20%7B%0Amargin%2Dleft%3A%205px%3B%0Amargin%2Dright%3A%205px%3B%0A%7D%0A%2Elightable%2Dminimal%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%2300000050%3B%0Aempty%2Dcells%3A%20hide%3B%0A%7D%0A%2Elightable%2Dminimal%20tbody%20tr%3Afirst%2Dchild%20td%20%7B%0Apadding%2Dtop%3A%200%2E5em%3B%0A%7D%0A%2Elightable%2Dminimal%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dminimal%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dclassic%20%7B%0Aborder%2Dtop%3A%200%2E16em%20solid%20%23111111%3B%0Aborder%2Dbottom%3A%200%2E16em%20solid%20%23111111%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0Amargin%3A%2010px%205px%3B%0A%7D%0A%2Elightable%2Dclassic%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dclassic%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%200%2E14em%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%20caption%20%7B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20td%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20th%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%200%2E10em%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dclassic%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20%7B%0Aborder%2Dtop%3A%203px%20double%20%23111111%3B%0Aborder%2Dbottom%3A%203px%20double%20%23111111%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%203px%20double%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20caption%20%7B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20td%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20th%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tbody%20tr%3Alast%2Dchild%20td%20%7B%0Aborder%2Dbottom%3A%203px%20double%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%20%7B%0Amin%2Dwidth%3A%20100%25%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Atable%2Dlayout%3A%20fixed%3B%0Afont%2Dfamily%3A%20Roboto%2C%20sans%2Dserif%3B%0Aborder%3A%201px%20solid%20%23EEE%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dmaterial%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%23EEE%3B%0A%7D%0A%2Elightable%2Dmaterial%20th%20%7B%0Aheight%3A%2056px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0A%7D%0A%2Elightable%2Dmaterial%20td%20%7B%0Aheight%3A%2052px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Aborder%2Dtop%3A%201px%20solid%20%23eeeeee%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20%7B%0Amin%2Dwidth%3A%20100%25%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Atable%2Dlayout%3A%20fixed%3B%0Afont%2Dfamily%3A%20Roboto%2C%20sans%2Dserif%3B%0Aborder%3A%201px%20solid%20%23FFFFFF12%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0Amargin%2Dbottom%3A%2010px%3B%0Abackground%2Dcolor%3A%20%23363640%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20th%20%7B%0Aheight%3A%2056px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Acolor%3A%20%23FFFFFF60%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20td%20%7B%0Aheight%3A%2052px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Acolor%3A%20%23FFFFFF%3B%0Aborder%2Dtop%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dpaper%20%7B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0Acolor%3A%20%23444%3B%0A%7D%0A%2Elightable%2Dpaper%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dpaper%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%2300000020%3B%0A%7D%0A%2Elightable%2Dpaper%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Acolor%3A%20%23666%3B%0Avertical%2Dalign%3A%20bottom%3B%0Aborder%2Dbottom%3A%201px%20solid%20%2300000020%3B%0Aline%2Dheight%3A%201%2E15em%3B%0Apadding%3A%2010px%205px%3B%0A%7D%0A%2Elightable%2Dpaper%20td%20%7B%0Avertical%2Dalign%3A%20middle%3B%0Aborder%2Dbottom%3A%201px%20solid%20%2300000010%3B%0Aline%2Dheight%3A%201%2E15em%3B%0Apadding%3A%207px%205px%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%2300000008%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Introduction to ‘SmallCountRounding’</h1>
<h4 class="author">Øyvind Langsrud and Johan Heldal</h4>
<h4 class="date">2022-08-26</h4>



<p><br><br></p>
<div id="introductory-example" class="section level1">
<h1>Introductory example</h1>
<div id="example-without-code" class="section level2">
<h2>Example without code</h2>
<p>First some data to be rounded. <br></p>
<table class="table table-bordered" style="font-size: 16px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 1</strong>: Original data in tabular form with row and column totals
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;background-color: #F0FFE9 !important;">
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col1
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col2
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col3
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col4
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col5
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
3
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
4
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
14
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row2
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
3
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row3
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: #F0FFE9 !important;font-weight: bold;" indentlevel="1">
Total
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
7
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
3
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
4
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
8
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;font-weight: bold;" indentlevel="1">
27
</td>
</tr>
</tbody>
</table>
<p><br> Some of the inner cells are rounded. Thereafter new totals are computed. The underlying algorithm tries to keep the values of these totals close to the original ones. <br></p>
<table class="table table-bordered" style="font-size: 16px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 2</strong>: All small inner cell values (1-4) are rounded using 5 as rounding base.
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;background-color: #F0FFE9 !important;">
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col1
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col2
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col3
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col4
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col5
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row1
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
16
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row2
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row3
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;font-weight: bold;" indentlevel="1">
Total
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
10
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;font-weight: bold;" indentlevel="1">
26
</td>
</tr>
</tbody>
</table>
<p><br> When the inner cells are not going to be published, the number of cells to be rounded can be limited. <br></p>
<table class="table table-bordered" style="font-size: 16px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 3</strong>: Assuming only row and column totals to be published, necessary small inner cell values (1-4) are rounded using 5 as rounding base.
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;background-color: #F0FFE9 !important;">
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col1
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col2
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col3
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col4
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
col5
</th>
<th style="text-align:right;font-weight: bold;background-color: #F0FFE9 !important;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row1
</td>
<td style="text-align:right;padding-left: 3em;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
4
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
15
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row2
</td>
<td style="text-align:right;padding-left: 3em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
8
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;" indentlevel="1">
row3
</td>
<td style="text-align:right;padding-left: 3em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: #FFFF88 !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: #F0FFE9 !important;font-weight: bold;" indentlevel="1">
Total
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
7
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;font-weight: bold;" indentlevel="1">
28
</td>
</tr>
</tbody>
</table>
<hr />
</div>
<div id="the-example-dataset-in-table-1" class="section level2">
<h2>The example dataset in Table 1</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SmallCountRounding)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">SmallCountData</span>(<span class="st">&quot;exPSD&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>   rows cols freq
1  row1 col1    6
2  row2 col1    1
3  row3 col1    0
4  row1 col2    0
5  row2 col2    2
6  row3 col2    1
7  row1 col3    1
8  row2 col3    3
9  row3 col3    1
10 row1 col4    3
11 row2 col4    1
12 row3 col4    0
13 row1 col5    4
14 row2 col5    2
15 row3 col5    2</code></pre>
</div>
<div id="rounding-all-small-cells-table-2" class="section level2">
<h2>Rounding all small cells (Table 2)</h2>
<p>To avoid any small values in the range 1-4 we can use 5 as rounding base.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">PLSrounding</span>(z, <span class="at">freqVar =</span> <span class="st">&quot;freq&quot;</span>, <span class="at">roundBase =</span> <span class="dv">5</span>)</span></code></pre></div>
<p>The result is given in Table 2 and can bee seen in the output elements below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">$</span>inner</span></code></pre></div>
<pre><code>   rows cols original rounded difference
1  row1 col1        6       6          0
2  row2 col1        1       0         -1
3  row3 col1        0       0          0
4  row1 col2        0       0          0
5  row2 col2        2       0         -2
6  row3 col2        1       0         -1
7  row1 col3        1       0         -1
8  row2 col3        3       5          2
9  row3 col3        1       0         -1
10 row1 col4        3       5          2
11 row2 col4        1       0         -1
12 row3 col4        0       0          0
13 row1 col5        4       5          1
14 row2 col5        2       0         -2
15 row3 col5        2       5          3</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">$</span>publish</span></code></pre></div>
<pre><code>    rows  cols original rounded difference
1  Total Total       27      26         -1
2  Total  col1        7       6         -1
3  Total  col2        3       0         -3
4  Total  col3        5       5          0
5  Total  col4        4       5          1
6  Total  col5        8      10          2
7   row1 Total       14      16          2
8   row1  col1        6       6          0
9   row1  col2        0       0          0
10  row1  col3        1       0         -1
11  row1  col4        3       5          2
12  row1  col5        4       5          1
13  row2 Total        9       5         -4
14  row2  col1        1       0         -1
15  row2  col2        2       0         -2
16  row2  col3        3       5          2
17  row2  col4        1       0         -1
18  row2  col5        2       0         -2
19  row3 Total        4       5          1
20  row3  col1        0       0          0
21  row3  col2        1       0         -1
22  row3  col3        1       0         -1
23  row3  col4        0       0          0
24  row3  col5        2       5          3</code></pre>
<p>The output element <code>publish</code> contains the original and rounded versions of the all the 24 values in Table 2. The corresponding element <code>inner</code> contains only the 15 inner cells and is similar to the input data. The values in publish are <code>additive</code>. That is, marginal cells (Totals) can be computed straightforwardly from <code>inner</code> for both original and rounded counts.</p>
</div>
<div id="rounding-necessary-small-inner-cell-table-3" class="section level2">
<h2>Rounding necessary small inner cell (Table 3)</h2>
<p>Assuming only row and column totals to be published, the publishable cells can be defined by the formula <code>~rows+cols</code>. Rounding can now be performed by:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">PLSrounding</span>(z, <span class="st">&quot;freq&quot;</span>, <span class="dv">5</span>, <span class="at">formula =</span> <span class="sc">~</span>rows <span class="sc">+</span> cols)</span></code></pre></div>
<p>The result is given in Table 3 and can bee seen in the output elements below.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>b<span class="sc">$</span>inner</span></code></pre></div>
<pre><code>   rows cols original rounded difference
1  row1 col1        6       6          0
2  row2 col1        1       1          0
3  row3 col1        0       0          0
4  row1 col2        0       0          0
5  row2 col2        2       0         -2
6  row3 col2        1       5          4
7  row1 col3        1       0         -1
8  row2 col3        3       5          2
9  row3 col3        1       0         -1
10 row1 col4        3       5          2
11 row2 col4        1       0         -1
12 row3 col4        0       0          0
13 row1 col5        4       4          0
14 row2 col5        2       2          0
15 row3 col5        2       0         -2</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>b<span class="sc">$</span>publish</span></code></pre></div>
<pre><code>   rows  cols original rounded difference
1 Total Total       27      28          1
2  row1 Total       14      15          1
3  row2 Total        9       8         -1
4  row3 Total        4       5          1
5 Total  col1        7       7          0
6 Total  col2        3       5          2
7 Total  col3        5       5          0
8 Total  col4        4       5          1
9 Total  col5        8       6         -2</code></pre>
</div>
<div id="unique-output-obtained-by-local-random-generator-seed" class="section level2">
<h2>Unique output obtained by local random generator seed</h2>
<p>The underlying algorithm is sequential. Within a loop, the next cell to be given the rounding base value is selected according to a criterion. Random draw is used when draw criterion. To ensure unique output, a fixed random generator seed is used locally within the function without affecting the random value stream in R. See the documentation of <code>rndSeed</code>, a parameter to <code>RoundViaDummy</code>.</p>
</div>
<div id="the-output-object" class="section level2">
<h2>The output object</h2>
<p>The result of printing the output from <code>PLSrounding</code> is (<code>a</code> and <code>b</code> as above):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>
PLSrounding summary:  

       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
             4          0.744         1.3333         1.6833 

Frequencies of cell frequencies and absolute differences:  

         inn.0 inn.1-4 inn.5 inn.6+ inn.all pub.0 pub.1-4 pub.5 pub.6+ pub.all
original     3      11     .      1      15     3      14     1      6      24
rounded     10       .     4      1      15    11       .     8      5      24
absDiff      4      11     .      .      15     5      19     .      .      24</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>
PLSrounding summary:  

       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
             2          0.941              1         1.2019 

Frequencies of cell frequencies and absolute differences:  

         inn.0 inn.1-4 inn.5 inn.6+ inn.all pub.0 pub.1-4 pub.5 pub.6+ pub.all
original     3      11     .      1      15     .       3     1      5       9
rounded      8       3     3      1      15     .       .     4      5       9
absDiff      7       8     .      .      15     2       7     .      .       9</code></pre>
<p>First some utility measures are printet. For example <code>maxdiff</code> is the maximum difference between an original and rounded cells within <code>publish</code>. Thereafter a table of frequencies of cell frequencies and absolute differences are printed. Summary of <code>inner</code> and <code>publish</code> are shown in the left and right parts of the table, respectively. For example, row <code>rounded</code> and column <code>inn.6+</code> is the number of rounded inner cell frequencies greater than or equal to 6. The last row (<code>absDiff</code>) is based on the differences without signs.</p>
<p>It is possible to compute manually the printed utility measures by:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> b<span class="sc">$</span>publish<span class="sc">$</span>original</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> b<span class="sc">$</span>publish<span class="sc">$</span>rounded</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">c</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">maxdiff        =</span>  <span class="fu">max</span>(<span class="fu">abs</span>(g <span class="sc">-</span> f)), </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">HDutility      =</span>  <span class="fu">HDutility</span>(f, g), </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">meanAbsDiff    =</span>  <span class="fu">mean</span>(<span class="fu">abs</span>(g <span class="sc">-</span> f)), </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">rootMeanSquare =</span>  <span class="fu">sqrt</span>(<span class="fu">mean</span>((g <span class="sc">-</span> f)<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
      2.000000       0.940951       1.000000       1.201850 </code></pre>
<p>These measures are also found in the output element <code>metrics</code> together with the same measures based on <code>inner</code>. See <code>?HDutility</code> for more information about the utility measure based on the Hellinger distance.</p>
<p>Apart from printing, output is a usual list and <code>summary</code> works as usual.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(b)</span></code></pre></div>
<pre><code>          Length Class      Mode   
inner      5     data.frame list   
publish    5     data.frame list   
metrics    9     -none-     numeric
freqTable 30     -none-     numeric</code></pre>
<p>The output element <code>freqTable</code> is the table seen when the output object is printed (frequencies of cell frequencies and absolute differences).</p>
<p><br><br></p>
</div>
</div>
<div id="hierarchical-data" class="section level1">
<h1>Hierarchical data</h1>
<div id="example-without-code-1" class="section level2">
<h2>Example without code</h2>
<p>Below is a small data set to be used as input.</p>
<table class="table table-bordered" style="font-size: 14px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 4</strong>: Input data
</caption>
<thead>
<tr>
<th style="text-align:left;">
geo
</th>
<th style="text-align:left;">
eu
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:right;">
freq
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Iceland
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
nonEU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2018
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
2
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Portugal
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2018
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
3
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Spain
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2018
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
7
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Iceland
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
nonEU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2019
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Portugal
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2019
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Spain
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2019
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
6
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>The variables <code>geo</code> and <code>eu</code> is hierarchical related. This data set can be processed in several ways. In some cases, the entire table will be input and in other cases the <code>eu</code> column can be omitted. Then, the hierarchical information is sent as input in another way. One possibility is the table below, where the hierarchy is coded as in the r package sdcTable.</p>
<table class="table table-bordered" style="font-size: 14px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 5</strong>: Hierarchy, <code>geo</code>
</caption>
<thead>
<tr>
<th style="text-align:left;">
levels
</th>
<th style="text-align:left;">
codes
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Total
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
EU
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Portugal
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Spain
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
nonEU
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Iceland
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Another possibility is TauArgus coding. More general coding is also possible. See <code>?AutoHierarchies</code> for more information.</p>
<p>Below is output in the case were all possible combinations (including the inner cells) are to be published. Also in this example we use 5 as a rounding base. As can be seen below, this output can be generated in several ways. The inner cells are colored according to the rounding.</p>
<table class="table table-bordered" style="font-size: 14px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 6</strong>: Ouput data (publish)
</caption>
<thead>
<tr>
<th style="text-align:left;">
geo
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:right;">
original
</th>
<th style="text-align:right;">
rounded
</th>
<th style="text-align:right;">
difference
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;background-color: white !important;">
23
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2018
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;background-color: white !important;">
12
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2019
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;background-color: white !important;">
11
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
EU
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;background-color: white !important;">
23
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
EU
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2018
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;background-color: white !important;">
12
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
EU
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2019
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;background-color: white !important;">
11
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
nonEU
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-3
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
nonEU
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2018
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
nonEU
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2019
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Iceland
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-3
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Iceland
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2018
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;background-color: #FFFF88 !important;">
0
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Iceland
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2019
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;background-color: #FFFF88 !important;">
0
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Portugal
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;background-color: white !important;">
10
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Portugal
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2018
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;background-color: #FFFF88 !important;">
5
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Portugal
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2019
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;background-color: #88FF88 !important;">
5
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Spain
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Total
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;background-color: white !important;">
13
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Spain
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2018
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;background-color: #88FF88 !important;">
7
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #F0FFE9 !important;">
Spain
</td>
<td style="text-align:left;background-color: #F0FFE9 !important;">
2019
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;background-color: #88FF88 !important;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<div id="data-table-4-and-hierarchies-table-5" class="section level2">
<h2>Data (Table 4) and hierarchies (Table 5)</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>e6 <span class="ot">&lt;-</span> <span class="fu">SmallCountData</span>(<span class="st">&quot;e6&quot;</span>)  <span class="co"># As Table 4 </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>eDimList <span class="ot">&lt;-</span> <span class="fu">SmallCountData</span>(<span class="st">&quot;eDimList&quot;</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>eDimList</span></code></pre></div>
<pre><code>$geo
  levels    codes
1      @    Total
2     @@       EU
3    @@@ Portugal
4    @@@    Spain
5     @@    nonEU
6    @@@  Iceland

$year
  levels codes
1      @ Total
2     @@  2018
3     @@  2019</code></pre>
<p>As seen above, a hierarchy is specified for both variables. <code>eDimList$geo</code> is given in Table 5 and <code>eDimList$year</code> is a plain hierarchy with total code.</p>
</div>
<div id="five-ways-to-produce-table-6" class="section level2">
<h2>Five ways to produce Table 6</h2>
<p>The five lines below produce the same results with element <code>publish</code> as in Table 6. Ordering of rows can be different.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PLSrounding</span>(e6, <span class="st">&quot;freq&quot;</span>, <span class="dv">5</span>)                                                      <span class="co"># a) </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PLSrounding</span>(e6, <span class="st">&quot;freq&quot;</span>, <span class="dv">5</span>, <span class="at">dimVar =</span> <span class="fu">c</span>(<span class="st">&quot;geo&quot;</span>, <span class="st">&quot;eu&quot;</span>, <span class="st">&quot;year&quot;</span>))                     <span class="co"># b) </span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PLSrounding</span>(e6, <span class="st">&quot;freq&quot;</span>, <span class="dv">5</span>, <span class="at">formula =</span> <span class="sc">~</span>eu <span class="sc">*</span> year <span class="sc">+</span> geo <span class="sc">*</span> year)                   <span class="co"># c)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PLSrounding</span>(e6[, <span class="sc">-</span><span class="dv">2</span>], <span class="st">&quot;freq&quot;</span>, <span class="dv">5</span>, <span class="at">hierarchies =</span> eDimList)                        <span class="co"># d)</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">PLSrounding</span>(e6[, <span class="sc">-</span><span class="dv">2</span>], <span class="st">&quot;freq&quot;</span>, <span class="dv">5</span>, <span class="at">hierarchies =</span> eDimList, <span class="at">formula =</span> <span class="sc">~</span>geo <span class="sc">*</span> year) <span class="co"># e)</span></span></code></pre></div>
<ul>
<li>In a), b) and d), the function uses hierarchies for the calculations. In a) and b) the hierarchies are found automatically from the input data. In a), <code>dimVar</code> is assumed to be all variables except <code>freq</code>.</li>
<li>In c) the cross-classifications are found from the formula. In addition, hierarchical relations in the input data are analysed so that <code>geo</code> and <code>eu</code> are combined into the same output column.<br />
</li>
<li>In e), how to cross the hierarchies are defined by a formula.</li>
</ul>
</div>
<div id="remarks-and-other-parameters" class="section level2">
<h2>Remarks and other parameters</h2>
<p>A difference occur when all combinations are not contained in input data. Then c) above will limit output to combinations available in input. In the other cases zeroes will be added. The extra zeroes can be avoided by using <code>removeEmpty=TRUE</code>. Note also the parameter <code>inputInOutput</code> which can be used to specify whether to include codes from input. Below is an example with incomplete input data using both these parameters.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">PLSrounding</span>(e6[<span class="sc">-</span><span class="dv">1</span>, ], <span class="st">&quot;freq&quot;</span>, <span class="dv">5</span>, <span class="at">removeEmpty =</span> <span class="cn">TRUE</span>, <span class="at">inputInOutput =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>,<span class="cn">TRUE</span>))</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>out</span></code></pre></div>
<pre><code>
PLSrounding summary:  

       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
             1         0.8925            0.5         0.7071 

Frequencies of cell frequencies and absolute differences:  

         inn.0 inn.1-4 inn.5 inn.6+ inn.all pub.0 pub.1-4 pub.5 pub.6+ pub.all
original     .       2     1      2       5     .       2     .      6       8
rounded      1       1     1      2       5     2       .     .      6       8
absDiff      4       1     .      .       5     4       4     .      .       8</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>out<span class="sc">$</span>inner</span></code></pre></div>
<pre><code>       geo year original rounded difference
2 Portugal 2018        3       3          0
3    Spain 2018        7       7          0
4  Iceland 2019        1       0         -1
5 Portugal 2019        5       5          0
6    Spain 2019        6       6          0</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>out<span class="sc">$</span>publish</span></code></pre></div>
<pre><code>    geo  year original rounded difference
1 Total Total       22      21         -1
2 Total  2018       10      10          0
3 Total  2019       12      11         -1
4    EU Total       21      21          0
5    EU  2018       10      10          0
6    EU  2019       11      11          0
7 nonEU Total        1       0         -1
8 nonEU  2019        1       0         -1</code></pre>
<p>In this case only a single inner cell needed to be rounded (Iceland, 2019). The original small value of (Portugal, 2018) could be retained.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
